!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("moment"),require("@fullcalendar/core")):"function"==typeof define&&define.amd?define(["exports","moment","@fullcalendar/core"],factory):(global=global||self,factory(global.FullCalendarMoment={},global.moment,global.FullCalendar))}(this,function(exports,momentNs,core){"use strict";function toMoment(date,calendar){if(!(calendar instanceof core.Calendar))throw new Error("must supply a Calendar instance");return convertToMoment(date,calendar.dateEnv.timeZone,null,calendar.dateEnv.locale.codes[0])}function toDuration(fcDuration){return moment.duration(fcDuration)}function formatWithCmdStr(cmdStr,arg){var cmd=parseCmdStr(cmdStr);if(arg.end){var startMom=convertToMoment(arg.start.array,arg.timeZone,arg.start.timeZoneOffset,arg.localeCodes[0]),endMom=convertToMoment(arg.end.array,arg.timeZone,arg.end.timeZoneOffset,arg.localeCodes[0]);return formatRange(cmd,createMomentFormatFunc(startMom),createMomentFormatFunc(endMom),arg.separator)}return convertToMoment(arg.date.array,arg.timeZone,arg.date.timeZoneOffset,arg.localeCodes[0]).format(cmd.whole)}function createMomentFormatFunc(mom){return function(cmdStr){return cmdStr?mom.format(cmdStr):""}}function convertToMoment(input,timeZone,timeZoneOffset,locale){var mom;return"local"===timeZone?mom=moment(input):"UTC"===timeZone?mom=moment.utc(input):moment.tz?mom=moment.tz(input,timeZone):(mom=moment.utc(input),null!=timeZoneOffset&&mom.utcOffset(timeZoneOffset)),mom.locale(locale),mom}function parseCmdStr(cmdStr){var parts=cmdStr.match(/^(.*?)\{(.*)\}(.*)$/);if(parts){var middle=parseCmdStr(parts[2]);return{head:parts[1],middle:middle,tail:parts[3],whole:parts[1]+middle.whole+parts[3]}}return{head:null,middle:null,tail:null,whole:cmdStr}}function formatRange(cmd,formatStart,formatEnd,separator){if(cmd.middle){var startHead=formatStart(cmd.head),startMiddle=formatRange(cmd.middle,formatStart,formatEnd,separator),startTail=formatStart(cmd.tail),endHead=formatEnd(cmd.head),endMiddle=formatRange(cmd.middle,formatStart,formatEnd,separator),endTail=formatEnd(cmd.tail);if(startHead===endHead&&startTail===endTail)return startHead+(startMiddle===endMiddle?startMiddle:startMiddle+separator+endMiddle)+startTail}var startWhole=formatStart(cmd.whole),endWhole=formatEnd(cmd.whole);return startWhole===endWhole?startWhole:startWhole+separator+endWhole}var moment=momentNs,main=core.createPlugin({cmdFormatter:formatWithCmdStr});exports.default=main,exports.toDuration=toDuration,exports.toMoment=toMoment,Object.defineProperty(exports,"__esModule",{value:!0})});