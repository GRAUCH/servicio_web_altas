!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("luxon"),require("fullcalendar")):"function"==typeof define&&define.amd?define(["exports","luxon","fullcalendar"],factory):(global=global||self,factory(global.FullCalendar=global.FullCalendar||{},global.luxon,global.FullCalendar))}(this,function(exports,luxon,fullcalendar){"use strict";function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function toDateTime(date,calendar){if(!(calendar instanceof fullcalendar.Calendar))throw new Error("must supply a Calendar instance");return luxon.DateTime.fromJSDate(date,{zone:calendar.dateEnv.timeZone,locale:calendar.dateEnv.locale.codes[0]})}function toDuration(duration,calendar){if(!(calendar instanceof fullcalendar.Calendar))throw new Error("must supply a Calendar instance");return luxon.Duration.fromObject(__assign({},duration,{locale:calendar.dateEnv.locale.codes[0]}))}function formatWithCmdStr(cmdStr,arg){var cmd=parseCmdStr(cmdStr);if(arg.end){var start=arrayToLuxon(arg.start.array,arg.timeZone,arg.localeCodes[0]),end=arrayToLuxon(arg.end.array,arg.timeZone,arg.localeCodes[0]);return formatRange(cmd,start.toFormat.bind(start),end.toFormat.bind(end),arg.separator)}return arrayToLuxon(arg.date.array,arg.timeZone,arg.localeCodes[0]).toFormat(cmd.whole)}function luxonToArray(datetime){return[datetime.year,datetime.month-1,datetime.day,datetime.hour,datetime.minute,datetime.second,datetime.millisecond]}function arrayToLuxon(arr,timeZone,locale){return luxon.DateTime.fromObject({zone:timeZone,locale:locale,year:arr[0],month:arr[1]+1,day:arr[2],hour:arr[3],minute:arr[4],second:arr[5],millisecond:arr[6]})}function parseCmdStr(cmdStr){var parts=cmdStr.match(/^(.*?)\{(.*)\}(.*)$/);if(parts){var middle=parseCmdStr(parts[2]);return{head:parts[1],middle:middle,tail:parts[3],whole:parts[1]+middle.whole+parts[3]}}return{head:null,middle:null,tail:null,whole:cmdStr}}function formatRange(cmd,formatStart,formatEnd,separator){if(cmd.middle){var startHead=formatStart(cmd.head),startMiddle=formatRange(cmd.middle,formatStart,formatEnd,separator),startTail=formatStart(cmd.tail),endHead=formatEnd(cmd.head),endMiddle=formatRange(cmd.middle,formatStart,formatEnd,separator),endTail=formatEnd(cmd.tail);if(startHead===endHead&&startTail===endTail)return startHead+(startMiddle===endMiddle?startMiddle:startMiddle+separator+endMiddle)+startTail}var startWhole=formatStart(cmd.whole),endWhole=formatEnd(cmd.whole);return startWhole===endWhole?startWhole:startWhole+separator+endWhole}var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;n>i;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign.apply(this,arguments)},LuxonNamedTimeZone=function(_super){function LuxonNamedTimeZone(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(LuxonNamedTimeZone,_super),LuxonNamedTimeZone.prototype.offsetForArray=function(a){return arrayToLuxon(a,this.timeZoneName).offset},LuxonNamedTimeZone.prototype.timestampToArray=function(ms){return luxonToArray(luxon.DateTime.fromMillis(ms,{zone:this.timeZoneName}))},LuxonNamedTimeZone}(fullcalendar.NamedTimeZoneImpl),main=fullcalendar.createPlugin({cmdFormatter:formatWithCmdStr,namedTimeZonedImpl:LuxonNamedTimeZone});exports.default=main,exports.toDateTime=toDateTime,exports.toDuration=toDuration,Object.defineProperty(exports,"__esModule",{value:!0}),exports.globalPlugins&&(exports.globalPlugins.push(exports.default),delete exports.default)});