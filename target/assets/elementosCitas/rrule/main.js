!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("rrule"),require("@fullcalendar/core")):"function"==typeof define&&define.amd?define(["exports","rrule","@fullcalendar/core"],factory):(global=global||self,factory(global.FullCalendarRrule={},global.rrule,global.FullCalendar))}(this,function(exports,rrule,core){"use strict";function parseRRule(input,dateEnv){var rrule$1,allDayGuess=null;if("string"==typeof input)rrule$1=rrule.rrulestr(input);else if("object"==typeof input&&input){var refined=__assign({},input);if("string"==typeof refined.dtstart){var dtstartMeta=dateEnv.createMarkerMeta(refined.dtstart);dtstartMeta?(refined.dtstart=dtstartMeta.marker,allDayGuess=dtstartMeta.isTimeUnspecified):delete refined.dtstart}"string"==typeof refined.until&&(refined.until=dateEnv.createMarker(refined.until)),null!=refined.freq&&(refined.freq=convertConstant(refined.freq)),refined.wkst=null!=refined.wkst?convertConstant(refined.wkst):(dateEnv.weekDow-1+7)%7,null!=refined.byweekday&&(refined.byweekday=convertConstants(refined.byweekday)),rrule$1=new rrule.RRule(refined)}return rrule$1?{rrule:rrule$1,allDayGuess:allDayGuess}:null}function convertConstants(input){return Array.isArray(input)?input.map(convertConstant):convertConstant(input)}function convertConstant(input){return"string"==typeof input?rrule.RRule[input.toUpperCase()]:input}var __assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;n>i;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign.apply(this,arguments)},EVENT_DEF_PROPS={rrule:null,duration:core.createDuration},recurring={parse:function(rawEvent,leftoverProps,dateEnv){if(null!=rawEvent.rrule){var props=core.refineProps(rawEvent,EVENT_DEF_PROPS,{},leftoverProps),parsed=parseRRule(props.rrule,dateEnv);if(parsed)return{typeData:parsed.rrule,allDayGuess:parsed.allDayGuess,duration:props.duration}}return null},expand:function(rrule,framingRange){return rrule.between(framingRange.start,framingRange.end,!0).filter(function(date){return date.valueOf()<framingRange.end.valueOf()})}},main=core.createPlugin({recurringTypes:[recurring]});exports.default=main,Object.defineProperty(exports,"__esModule",{value:!0})});